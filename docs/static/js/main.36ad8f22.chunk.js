(this.webpackJsonpwator=this.webpackJsonpwator||[]).push([[0],{104:function(e,t,n){e.exports=n(248)},247:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(100),r=n.n(o),c=n(32),s=n(4),l=(n(246),n(3)),u=n(45),h=n(17),f=n(15),g=n(22),m=n(16),p=function e(){Object(l.a)(this,e),this.type=void 0,this.progressSimulation=void 0},d=function(e){function t(e){var n,i=e.tile;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this))).tile=void 0,n.die=function(){n.getTile().removeContent(Object(g.a)(n))},n.getTile=function(){return n.tile},n.setTile=function(e){n.tile=e},n.tile=i,n}return Object(m.a)(t,e),t}(p),v=function e(t){var n=this;Object(l.a)(this,e),this.contents=[],this.coordinates=void 0,this.isEmpty=function(){return 0===n.contents.length||n.hasContent("plankton")},this.hasContent=function(e){return void 0!==n.contents.find((function(t){return t.type===e}))},this.getContents=function(){return n.contents},this.progressSimulation=function(){n.contents.forEach((function(e){return e.progressSimulation()}))},this.addContent=function(e){n.contents=[].concat(Object(u.a)(n.contents),[e]),e instanceof d&&e.setTile(n)},this.removeContent=function(e){n.contents=n.contents.filter((function(t){return t!==e}))},this.coordinates=t},O=["NORTH","NORTH_EAST","EAST","SOUTH_EAST","SOUTH","SOUTH_WEST","WEST","NORTH_WEST"],b=function(e){function t(e){var n,i=e.age,a=e.weight,o=e.ageWhenAnimalIsDying,r=e.ageWhenAnimalIsBreeding,c=e.tile;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,{tile:c}))).age=void 0,n.ageWhenAnimalIsDying=void 0,n.weight=void 0,n.ageWhenAnimalIsBreeding=void 0,n.moveIntoTile=function(e){n.getTile().removeContent(Object(g.a)(n)),e.addContent(Object(g.a)(n))},n.move=void 0,n.breed=function(){if(n.getAge()===n.ageWhenAnimalIsBreeding){var e=k.getOcean().findNeighboringOceanTiles(n.getTile().coordinates).find((function(e){return e.isEmpty()}));if(e){var t=Math.floor(n.getWeight()/2),i=Math.ceil(n.getWeight()/2),a=n.getTile();n.die(),"fish"===n.type?(a.addContent(new w({tile:a,weight:t})),e.addContent(new w({tile:e,weight:i}))):"shark"===n.type&&(a.addContent(new T({tile:a,weight:t})),e.addContent(new T({tile:e,weight:i})))}}},n.getAge=function(){return n.age},n.getWeight=function(){return n.weight},n.gainWeight=function(){n.weight=n.weight+1},n.progressSimulation=function(){n.age=n.age+1,n.age===n.ageWhenAnimalIsDying?n.die():(n.move(),n.breed(),n.weight=n.weight-1,0===n.weight&&n.die())},n.age=i,n.ageWhenAnimalIsDying=o,n.ageWhenAnimalIsBreeding=r,n.weight=a,n}return Object(m.a)(t,e),t}(d),T=function(e){function t(e){var n,i=e.tile,a=e.weight,o=void 0===a?20:a;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,{tile:i,weight:o,age:1,ageWhenAnimalIsDying:20,ageWhenAnimalIsBreeding:15}))).type="shark",n.move=function(){var e=k.getOcean().findNeighboringOceanTiles(n.getTile().coordinates).filter((function(e){return e.hasContent("fish")||e.hasContent("plankton")||e.isEmpty()}));if(void 0!==e.find((function(e){return e.hasContent("fish")}))){var t=e.find((function(e){return e.hasContent("fish")}));t.getContents().find((function(e){return"fish"===e.type})).beEaten(),n.gainWeight(),n.moveIntoTile(t)}else{var i=e.find((function(e){return e.isEmpty()}));void 0!==i&&n.moveIntoTile(i)}},n}return Object(m.a)(t,e),t}(b),w=function(e){function t(e){var n,i=e.tile,a=e.weight,o=void 0===a?15:a;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,{age:1,ageWhenAnimalIsDying:15,ageWhenAnimalIsBreeding:12,tile:i,weight:o}))).type="fish",n.preferredDirection=void 0,n.calculateMovementDirection=function(){return[].concat(Object(u.a)(O),[n.preferredDirection])[Math.floor(Math.random()*O.length+1)]},n.move=function(){var e=k.getOcean().findOceanTileInDirection({fromCoordinates:n.getTile().coordinates,inDirection:n.calculateMovementDirection()});null!==e&&e.isEmpty()&&(n.moveIntoTile(e),e.hasContent("plankton")&&(e.getContents().find((function(e){return"plankton"===e.type})).beEaten(),n.gainWeight()))},n.beEaten=function(){n.die()},n.preferredDirection=O[Math.floor(Math.random()*O.length)],n}return Object(m.a)(t,e),t}(b),y=function(e){function t(e){var n,i=e.tile;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,{tile:i}))).type="plankton",n.progressSimulation=function(){},n.beEaten=function(){n.die()},n}return Object(m.a)(t,e),t}(d),E=function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).type="rock",n.progressSimulation=function(){},n}return Object(m.a)(t,e),t}(p);var k=function e(t){var n=this;Object(l.a)(this,e),this.oceanTiles=void 0,this.oceanDimensions=void 0,this.populateTile=function(e,t){var n=Math.floor(100*Math.random()),i={lower:0,upper:t.fish},a={lower:t.fish,upper:t.fish+t.sharks},o={lower:t.fish+t.sharks,upper:t.fish+t.sharks+t.plankton},r={lower:t.fish+t.sharks+t.plankton,upper:t.fish+t.sharks+t.plankton+t.rocks};n>i.lower&&n<=i.upper?e.addContent(new w({tile:e})):n>a.lower&&n<=a.upper?e.addContent(new T({tile:e})):n>o.lower&&n<=o.upper?e.addContent(new y({tile:e})):n>r.lower&&n<=r.upper&&e.addContent(new E)},this.getOceanTiles=function(){return n.oceanTiles},this.progressSimulation=function(){var e=[],t=!0,i=!1,a=void 0;try{for(var o,r=n.oceanTiles.flat()[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var c=o.value,s=!0,l=!1,u=void 0;try{for(var h,f=c.getContents()[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var g=h.value;"fish"!==g.type&&"shark"!==g.type||e.push(g)}}catch(m){l=!0,u=m}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}}catch(m){i=!0,a=m}finally{try{t||null==r.return||r.return()}finally{if(i)throw a}}return e.forEach((function(e){e.progressSimulation()})),n.oceanTiles},this.findOceanTileInDirection=function(e){var t=function(e,t){var n=e.x,i=e.y;switch(t){case"NORTH":return{x:n,y:i-1};case"NORTH_EAST":return{x:n+1,y:i-1};case"EAST":return{x:n+1,y:i};case"SOUTH_EAST":return{x:n+1,y:i+1};case"SOUTH":return{x:n,y:i+1};case"SOUTH_WEST":return{x:n-1,y:i+1};case"WEST":return{x:n-1,y:i};case"NORTH_WEST":return{x:n-1,y:i-1}}}(e.fromCoordinates,e.inDirection),i=t.x,a=t.y;return i<0||a<0?null:i>=n.oceanDimensions.width||a>=n.oceanDimensions.height?null:n.oceanTiles[a][i]},this.findNeighboringOceanTiles=function(e){return O.map((function(t){return n.findOceanTileInDirection({fromCoordinates:e,inDirection:t})})).filter((function(e){return null!==e}))},this.oceanDimensions=t.dimensions,this.oceanTiles=new Array;for(var i=0;i<this.oceanDimensions.height;i++){this.oceanTiles[i]=new Array;for(var a=0;a<this.oceanDimensions.width;a++){var o=new v({x:a,y:i});this.oceanTiles[i][a]=o,this.populateTile(o,t.population)}}};k.oceanInstance=void 0,k.createOcean=function(e){return k.oceanInstance=new k(e),k.oceanInstance},k.getOcean=function(){if(null===k.oceanInstance)throw new Error("You have to call createOcean before you can get an instance of Ocean");return k.oceanInstance};var S=function e(t){var n=this;Object(l.a)(this,e),this.ocean=void 0,this.progressSimulation=function(){return n.ocean.progressSimulation()},this.getOceanTiles=function(){return n.ocean.getOceanTiles()},this.ocean=k.createOcean(t)};S.createSimulation=function(e){return new S(e)};var j=n(6),C=n.n(j),I=(n(247),S.createSimulation({dimensions:{width:25,height:25},population:{fish:20,sharks:5,plankton:40,rocks:10}})),D=function(e){var t,n=e.oceanTile,i=C()("tile",{water:n.isEmpty(),plankton:n.hasContent("plankton"),fish:n.hasContent("fish"),shark:n.hasContent("shark"),rock:n.hasContent("rock")});return n.hasContent("fish")?t=a.a.createElement(a.a.Fragment,null,"\ud83d\udc1f"):n.hasContent("shark")&&(t=a.a.createElement(a.a.Fragment,null,"\ud83e\udd88")),a.a.createElement("div",{className:i},t)},W=function(e,t){return"tile-".concat(e,"-").concat(t.getContents().map((function(e){return e.type})).join("-"))},x=function(){var e=a.a.useState((function(){return{dimensions:{width:25,height:25},population:{fish:20,sharks:10,plankton:30,rocks:5},simulation:{speed:350}}})),t=Object(c.a)(e,2),n=t[0],i=t[1],o=a.a.useState(!1),r=Object(c.a)(o,2),l=r[0],u=r[1],h=a.a.useState(1),f=Object(c.a)(h,2),g=(f[0],f[1]),m=a.a.useState((function(){return I.getOceanTiles()})),p=Object(c.a)(m,2),d=p[0],v=p[1],O=a.a.useCallback((function(){var e=I.progressSimulation();v(e),g((function(e){return e+1}))}),[]);return a.a.useEffect((function(){if(l){var e=setInterval((function(){O()}),n.simulation.speed);return function(){clearInterval(e)}}}),[l,O,n]),a.a.createElement(a.a.Fragment,null,a.a.createElement(s.d,{data:n,onUpdate:function(e){i(e)}},a.a.createElement(s.b,{title:"Dimensions",closed:!1},a.a.createElement(s.c,{path:"dimensions.width",label:"Width",min:20,max:50,step:1}),a.a.createElement(s.c,{path:"dimensions.height",label:"Height",min:20,max:50,step:1})),a.a.createElement(s.b,{title:"Population",closed:!1},a.a.createElement(s.c,{path:"population.fish",label:"% Fishes",min:1,max:100,step:1}),a.a.createElement(s.c,{path:"population.sharks",label:"% Sharks",min:1,max:100,step:1}),a.a.createElement(s.c,{path:"population.plankton",label:"% Plankton",min:1,max:100,step:1}),a.a.createElement(s.c,{path:"population.rocks",label:"% Rocks",min:1,max:100,step:1})),a.a.createElement(s.b,{title:"Simulation"},a.a.createElement(s.c,{path:"simulation.speed",label:"Speed in ms",min:100,max:5e3,step:100})),a.a.createElement(s.a,{onClick:function(){u(!1),I=S.createSimulation(n),v(I.getOceanTiles()),g(1)},label:"Restart with new Parameters"}),a.a.createElement(s.a,{disabled:l,onClick:function(){O()},label:"Progress Simulation"}),a.a.createElement(s.a,{onClick:function(){u((function(e){return!e}))},label:l?"stop simulation":"start simulation"})),a.a.createElement("div",null,d.map((function(e,t){return a.a.createElement("div",{key:"row-".concat(t),style:{display:"flex",flexDirection:"row"}},e.map((function(e,t){return a.a.createElement(D,{key:W(t,e),oceanTile:e})})))}))))};r.a.render(a.a.createElement(x,null),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.36ad8f22.chunk.js.map